{% extends 'layout.html' %}

{% block title %}
{{ book.title }}
{% endblock title %}

{% block body %}
<p class="lead mb-2">{{ book.author_name }}</p>
<p class="lead mb-2">ISBN: {{ book.isbn }}</p>

<h2 class="h4 mt-4">Goodreads ratings</h2>
<p class="mb-1">Average rating: <strong>{{ goodreads_avg_rating }}</strong></p>
<p class="mb-1">Number of ratings: <strong>{{ goodreads_ratings_count }}</strong></p>

<h2 class="h4 mt-4">User reviews</h2>
{% for review in reviews %}
  <div class="mt-3">
    <p class="mb-1"><strong>{{ review.username }}</strong></p>
    <p class="mb-1"><small>Rating: <strong>{{ review.rating }}</strong></small></p>
    <p class="mb-1"><small>Opinion: <strong>{{ review.opinion }}</strong></small></p>
  </div>
{% endfor %}

{% if not reviews %}
  <p>This book has not gotten any review yet. Be the first to write one.</p>
{% endif %}

{% if can_write_review %}
  <form action="/books/{{ book.id }}/reviews" method="POST" class="w-50">
    <div class="form-group">
      <label>Rating</label>
      <input class="form-control form-control-sm" name="rating" type="number" min="1" max="5" placeholder="1-5" required />
    </div>
    <div class="form-group">
      <label>Review</label>
      <textarea class="form-control form-control-sm" name="opinion" type="text" placeholder="Your thought on this book"></textarea>
    </div>
    <button type="submit" class="btn btn-warning btn-sm">Submit</button>
  </form>
{% endif %}

{% endblock body %}
